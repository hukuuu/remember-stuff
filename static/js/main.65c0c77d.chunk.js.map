{"version":3,"sources":["store.js","things/EditForm.js","things/AddScreen.js","things/Controls.js","things/Thing.js","utils.js","things/ThingList.js","things/WorkoutScreen.js","things/EditScreen.js","things/EditListScreen.js","App.js","index.js"],"names":["useStore","create","persist","set","things","add","thing","console","log","produce","draft","push","id","v4","update","t","state","map","del","filter","lastWorkout","setLastWorkout","Date","now","name","defaultConfig","showDelete","EditForm","onSave","onCancel","onDelete","config","useState","title","setTitle","body","setBody","useEffect","className","htmlFor","rows","type","placeholder","value","onChange","e","target","onClick","emptyThing","AddScreen","navigate","useNavigate","setThing","memoryModel","defaultModel","lastReview","Controls","onGood","onBad","Thing","tUntilNow","ts","EmptyList","ThingList","index","setIndex","makeThingUpdater","success","updated","updateRecall","interestingThings","length","useMemo","recallProbability","predictRecall","sort","a","b","WorkoutScreen","EditScreen","useParams","useCallback","find","EditListScreen","i","to","MyLink","text","App","exact","path","element","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.65c0c77d.chunk.js","sourcesContent":["import create from 'zustand'\nimport { persist } from 'zustand/middleware'\nimport produce from 'immer'\nimport { v4 } from 'uuid'\n\nconst useStore = create(\n  persist(\n    set => ({\n      things: [],\n      add: thing => {\n        console.log('add', thing)\n        set(\n          produce(draft => {\n            draft.things.push({ id: v4(), ...thing })\n          })\n        )\n      },\n      update: t => {\n        console.log('update', t)\n        set(state => ({\n          things: state.things.map(thing => (thing.id === t.id ? t : thing)),\n        }))\n      },\n      del: id => {\n        console.log('delete', id)\n        // set(state => state.things.filter(thing => thing.id !== id))\n        set(state => ({\n          things: state.things.filter(thing => thing.id !== id),\n        }))\n      },\n      lastWorkout: 0,\n      setLastWorkout: () => {\n        set(() => ({\n          lastWorkout: Date.now(),\n        }))\n      },\n    }),\n    {\n      name: 'remember-stuff',\n    }\n  )\n)\n\nexport default useStore\n","import { useState, useEffect } from 'react'\n\nconst defaultConfig = {\n  showDelete: true,\n}\n\nconst EditForm = ({\n  thing,\n  onSave,\n  onCancel,\n  onDelete,\n  config = defaultConfig,\n}) => {\n  const [title, setTitle] = useState(thing.title)\n  const [body, setBody] = useState(thing.body)\n\n  useEffect(() => {\n    setTitle(thing.title)\n    setBody(thing.body)\n  }, [thing])\n\n  const confirmDelete = () => {\n    // if (confirm('Confirm Deletion?')) onDelete(thing.id)\n    onDelete(thing.id)\n  }\n\n  const { showDelete } = config\n\n  return (\n    <div className=\"w-full\">\n      <form className=\"px-8 pt-6 pb-8 mb-4\">\n        <div className=\"mb-4\">\n          <label className=\"block  text-sm mb-2\" htmlFor=\"title\">\n            Title\n          </label>\n          <textarea\n            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline\"\n            rows={3}\n            id=\"title\"\n            type=\"text\"\n            placeholder=\"\"\n            value={title}\n            onChange={e => setTitle(e.target.value)}\n          />\n        </div>\n        <div className=\"mb-6\">\n          <label className=\"block text-sm mb-2\" htmlFor=\"details\">\n            Details\n          </label>\n          <textarea\n            rows={15}\n            className=\"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 mb-3 leading-tight focus:outline-none focus:shadow-outline\"\n            id=\"details\"\n            type=\"details\"\n            placeholder=\"\"\n            value={body}\n            onChange={e => setBody(e.target.value)}\n          />\n        </div>\n        <div className=\"flex items-center justify-between\">\n          <button\n            className=\"hover:bg-pink-600\"\n            type=\"button\"\n            onClick={() => onSave({ ...thing, title, body })}\n          >\n            [Save]\n          </button>\n          {showDelete && (\n            <button\n              className=\"hover:bg-pink-600\"\n              type=\"button\"\n              onClick={confirmDelete}\n            >\n              [Delete]\n            </button>\n          )}\n          <button\n            className=\"hover:bg-pink-600\"\n            type=\"button\"\n            onClick={onCancel}\n          >\n            [Cancel]\n          </button>\n        </div>\n      </form>\n    </div>\n  )\n}\n\nexport default EditForm\n","import { useState } from 'react'\nimport { useNavigate } from 'react-router-dom'\nimport useStore from '../store'\nimport EditForm from './EditForm'\nimport { defaultModel } from 'ebisu-js'\n\nconst emptyThing = { title: '', body: '' }\n\nconst AddScreen = () => {\n  const navigate = useNavigate()\n  const add = useStore(state => state.add)\n  const [thing, setThing] = useState(emptyThing)\n\n  const onSave = ({ title, body }) => {\n    console.log('onsave', title, body)\n    add({\n      title,\n      body,\n      memoryModel: defaultModel(5),\n      lastReview: Date.now(),\n    })\n    setThing({ ...emptyThing })\n  }\n\n  const onCancel = () => {\n    navigate(-1)\n  }\n\n  const config = {\n    showDelete: false,\n  }\n\n  return <EditForm {...{ thing, onSave, onCancel, config }} />\n}\n\nexport default AddScreen\n","const Controls = ({ onGood, onBad }) => {\n  return (\n    <div className=\"flex h-20 justify-around items-center\">\n      <button className=\"hover:bg-pink-600\" onClick={onGood}>\n        [‚ù§Ô∏è Like]\n      </button>\n      <button className=\"hover:bg-pink-600\" onClick={onBad}>\n        [üí© Dislike]\n      </button>\n    </div>\n  )\n}\n\nexport default Controls\n","const Thing = ({ thing }) => {\n  return (\n    <div className=\" flex flex-1 flex-col p-8  overflow-y-hidden \">\n      <p className=\"text-green-500 text-3xl font-semibold text-center\">\n        {thing.title}\n      </p>\n      <br />\n      <p className=\"text-lg text-center\">{thing.body}</p>\n    </div>\n  )\n}\n\nexport default Thing\n","export const tUntilNow = ts => (Date.now() - ts) / (1000 * 60 * 60)\n","import { useMemo, useState } from 'react'\nimport Controls from './Controls'\nimport Thing from './Thing'\nimport { predictRecall, updateRecall } from 'ebisu-js'\nimport useStore from '../store'\nimport { tUntilNow } from '../utils'\n\nconst EmptyList = () => {\n  return (\n    <div className=\"flex flex-1 flex-col justify-center items-center text-6xl \">\n      ALL GOOD!\n    </div>\n  )\n}\n\nconst ThingList = ({ things }) => {\n  const [index, setIndex] = useState(0)\n  const update = useStore(state => state.update)\n  const [lastWorkout, setLastWorkout] = useStore(state => [\n    state.lastWorkout,\n    state.setLastWorkout,\n  ])\n\n  const makeThingUpdater = (thing, success) => () => {\n    console.log('before update: ', thing)\n    const updated = {\n      ...thing,\n      memoryModel: updateRecall(\n        thing.memoryModel,\n        success,\n        1,\n        tUntilNow(thing.lastReview)\n      ),\n      lastReview: Date.now(),\n    }\n    console.log('new value: ', updated)\n    update(updated)\n    if (index + 1 >= interestingThings.length) setLastWorkout(Date.now())\n    setIndex(index + 1)\n  }\n\n  const interestingThings = useMemo(\n    () =>\n      things\n        .map(thing => ({\n          ...thing,\n          recallProbability: predictRecall(\n            thing.memoryModel,\n            tUntilNow(thing.lastReview),\n            true\n          ),\n        }))\n        .sort((a, b) => a.recallProbability - b.recallProbability),\n    // .filter(thing => thing.recallProbability < 0.8),\n    [lastWorkout]\n  )\n\n  if (index >= interestingThings.length) return <EmptyList />\n\n  const thing = interestingThings[index]\n\n  return (\n    <>\n      <Thing thing={thing} />\n      <Controls\n        onGood={makeThingUpdater(thing, false)}\n        onBad={makeThingUpdater(thing, true)}\n      />\n    </>\n  )\n}\n\nexport default ThingList\n","import ThingList from './ThingList'\nimport useStore from '../store'\nimport Debug from './Debug'\n\nconst WorkoutScreen = () => {\n  const things = useStore(state => state.things)\n\n  return (\n    <>\n      <ThingList things={things} />\n      {/* <Debug /> */}\n    </>\n  )\n}\n\nexport default WorkoutScreen\n","import { useCallback } from 'react'\nimport { useParams, useNavigate } from 'react-router-dom'\n\nimport useStore from '../store'\nimport EditForm from './EditForm'\n\nconst EditScreen = () => {\n  const { id } = useParams()\n  const navigate = useNavigate()\n\n  const thing = useStore(\n    useCallback(state => state.things.find(thing => thing.id === id), [id])\n  )\n\n  const update = useStore(state => state.update)\n  const del = useStore(state => state.del)\n\n  const onDelete = id => {\n    del(id)\n    onCancel()\n  }\n  const onCancel = () => {\n    navigate(-1)\n  }\n\n  if (!thing) return <div>Item not found!</div>\n\n  return <EditForm {...{ thing, onDelete, onCancel }} onSave={update} />\n}\n\nexport default EditScreen\n","import useStore from '../store'\nimport { Link } from 'react-router-dom'\n\nconst EditListScreen = () => {\n  const things = useStore(state => state.things)\n\n  return (\n    <ul className=\"mt-12 px-12\">\n      {things.map((thing, i) => (\n        <li key={i} className=\"py-1 hover:bg-pink-600\">\n          <Link to={`/edit/${thing.id}`}>\n            {i + 1 + '. '}\n            {thing.title}\n          </Link>\n        </li>\n      ))}\n    </ul>\n  )\n}\n\nexport default EditListScreen\n","import { HashRouter as Router, Routes, Route, Link } from 'react-router-dom'\nimport { AddScreen, WorkoutScreen, EditListScreen, EditScreen } from './things'\n\nconst MyLink = ({ to, text }) => (\n  <Link className=\"hover:bg-pink-600\" to={to}>\n    [{text}]\n  </Link>\n)\n\nexport default function App() {\n  return (\n    <Router>\n      <div className=\"max-w-md mx-auto flex flex-col flex-grow w-full bg-gray-700 text-gray-100 font-mono\">\n        <nav className=\"flex justify-evenly\">\n          <MyLink to=\"/\" text=\"Home\" />\n          <MyLink to=\"/add\" text=\"Add\" />\n          <MyLink to=\"/edit\" text=\"Edit\" />\n        </nav>\n        <div className=\"flex flex-1 flex-col\">\n          <Routes>\n            <Route exact path=\"/\" element={<WorkoutScreen />} />\n            <Route path=\"/add\" element={<AddScreen />} />\n            <Route path=\"/edit\" element={<EditListScreen />} />\n            <Route path=\"/edit/:id\" element={<EditScreen />} />\n          </Routes>\n        </div>\n      </div>\n    </Router>\n  )\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n)\n"],"sourceRoot":""}